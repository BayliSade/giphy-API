<!DOCTYPE html>
<html>
<head>
    <title>Actions Gifs</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>
<div class="jumbotron">
    <div class="container">
        <h1>Actions Search</h1>
    </div>
</div>
<div id="buttonsView" class="container">
    <p>Bottons will go here</p>
</div>
<div class="container">
    <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
        <div id="gifsView">
            <p>Gifs will go here</p>
        </div>
    </div>
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
        <form id="gif-form" role="form">
            <h2><legend>Action Submission</legend></h2>
            <div class="form-group">
                <label for="action-input">Add your action below</label>
                <input type="text" id="action-input">
            </div>
            <input id="addGif" type="submit" value="Add your action" class="btn btn-primary">
        </form>    
    </div>
</div>
<footer id="footer" class="jumbotron">
    <div class="container">
    </div>
</footer>
<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script type="text/javascript">
    var actions = ["Dancing", "Swimming", "Skipping", "Crying", "Beyoncing"];// array of actions, new actions will be pushed into this array;
    // Function & Methods
    function displayButtons(){ 
        $("#buttonsView").empty(); // erasing anything in this div id so that it doesnt duplicate the results
        for (var i = 0; i < actions.length; i++){
            var gifButton = $("<button>");
            gifButton.addClass("action");
            gifButton.addClass("btn btn-primary")
            gifButton.attr("data-name", actions[i]);
            gifButton.text(actions[i]);
            $("#buttonsView").append(gifButton);
        }
    }
    function displayGifs(){
        var action = $(this).attr("data-name");
        // console.log($(this));
        var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + action + "&api_key=dc6zaTOxFJmzC&limit=10";
        console.log(queryURL); // displays the constructed url
        //Write code between the dashes below to hit the queryURL, take the data and display it in the div with an id of gifsView
        
        $.ajax({
                url: queryURL,
                method: 'GET'
            })
            .done(function(response) {
                console.log(response); // console test to make sure something returns
                $("#gifsView").empty(); // erasing anything in this div id so that it doesnt keep any from the previous click
                var results = response.data; //shows results of gifs
                for (var i=0; i<results.length; i++){

                    var gifDiv = $("<div>");

                    var gifRating = $("<p>");
                    $("p").text("Rating: " + results[i].rating);
                    gifDiv.append(gifRating);
        
                    var gifImage = $("<img>");
                    gifImage.attr("src", results[i].images.fixed_height_still.url);
                    gifImage.addClass("image");
                    gifDiv.append(gifImage);

                    $("#gifsView").prepend(gifDiv);
                }
        });
    }
    // calling fuctions
    displayButtons(); // displays list of actions already created
    $("#addGif").on("click", function(){
        var action = $("#action-input").val().trim();
        actions.push(action);
        
        displayButtons();
        return false;
    });
    $(document).on("click", ".action", displayGifs);
</script>
</body>
</html>