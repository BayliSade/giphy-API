<!DOCTYPE html>
<html>
<head>
    <title>Actions Gifs</title>
    <style type="text/css">
        .btn {
        margin: 3px;
        }
        img { 
        height: 150px;
        width: 150px;
        }
        .gifDiv{
        float: left;
        margin: 3px;
        }
    </style>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
</head>
<body>
<div class="jumbotron">
    <div class="container">
        <h1>Actions Search</h1>
    </div>
</div>
<div id="gifButtonsView" class="container"></div>
<div class="container">
    <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
        <div id="gifsView"></div>
    </div>
    <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
        <form id="gif-form" role="form">
            <h2><legend>Action Submission</legend></h2>
            <div class="form-group">
                <label for="action-input">Add your action below</label>
                <input type="text" id="action-input">
            </div>
            <input id="addGif" type="submit" value="Add your action" class="btn btn-primary">
        </form>    
    </div>
</div>
<footer id="footer" class="jumbotron">
    <div class="container">
    </div>
</footer>
<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
<script type="text/javascript">
    // An array of actions, new actions will be pushed into this array;
    var actions = ["Dancing", "Jogging", "Falling", "Reading", "Pushing", "Swimming", "Eating", "Skipping", "Crying", "Winking","Beyoncing"];
    // Creating Functions & Methods
    // Function that displays all gif buttons
    function displayGifButtons(){ 
        $("#gifButtonsView").empty(); // erasing anything in this div id so that it doesnt duplicate the results
        for (var i = 0; i < actions.length; i++){
            var gifButton = $("<button>");
            gifButton.addClass("action");
            gifButton.addClass("btn btn-primary")
            gifButton.attr("data-name", actions[i]);
            gifButton.text(actions[i]);
            $("#gifButtonsView").append(gifButton);
        }
    }
    // Function to hide
    function hideMe(e) {
        $(e).hide();
    }
    // Function to show
    function showMe(e) {
        $(e).show();
    }
    // Function to add a new action button
    function addNewButton(){
        $("#addGif").on("click", function(){
            var action = $("#action-input").val().trim();
            actions.push(action);
            
            displayGifButtons();
            return false;
        });
    }
    // Function that displays all of the gifs
    function displayGifs(){
        var action = $(this).attr("data-name");
        var queryURL = "http://api.giphy.com/v1/gifs/search?q=" + action + "&api_key=dc6zaTOxFJmzC&limit=10";
        console.log(queryURL); // displays the constructed url
        $.ajax({
                url: queryURL,
                method: 'GET'
            })
            .done(function(response) {
                console.log(response); // console test to make sure something returns
                $("#gifsView").empty(); // erasing anything in this div id so that it doesnt keep any from the previous click
                var results = response.data; //shows results of gifs
                for (var i=0; i<results.length; i++){
                    var gifDiv = $("<div>"); //div for the gifs to go inside
                    gifDiv.addClass("gifDiv");
                    // pulling rating of gif
                    var gifRating = $("<p>").text("Rating: " + results[i].rating);
                    gifDiv.append(gifRating);
                    // pulling gif
                    var gifImage = $("<img>");
                    gifImage.attr("src", results[i].images.fixed_height.url);
                    gifImage.attr("id", "gifImage");
                    gifImage.addClass("image");
                    gifDiv.append(gifImage);
                    // pulling still image of gif
                    var gifStillImage = $("<img>");
                    gifStillImage.attr("src", results[i].images.fixed_height_still.url);
                    gifStillImage.attr("id", "gifStillImage");
                    gifStillImage.addClass("image");
                    gifDiv.append(gifStillImage);
                    // adding div of gifs to gifsView div
                    $("#gifsView").prepend(gifDiv);

                    showMe("#gifStillImage"); // shows gif still initially
                    hideMe("#gifImage"); // hides moving gif initially 
                }
            });
    }
    // Calling Functions & Methods
    displayGifButtons(); // displays list of actions already created
    addNewButton();
    $(document).on("click", ".action", displayGifs);
</script>
</body>
</html>